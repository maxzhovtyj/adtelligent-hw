### Source campaigns endpoint performance testing

[Results](./vegeta/README.md)

#### Conclusion: 
database connection is a bottleneck, data caching in memory significantly improves performance  

### 1. Основы проектирования баз данных, Шардирование и реплецирование

- Типа джоинов

- группировка
- where и having
- что такое шардирование, для чего используется, как помогает улучшить
- что такое реплицирование
- что такое индексы, внешние ключи, транзакции

ДЗ: создать квериками базу данных, добавить таблицы сорсов (ид, имя), кампаний (ид, имя) и связки с ними, заполнить таблицы данными (случайным образом создать 100 сорсов, 100 кампаний и связки между ними, на один сорс можно быть связан с кампаниями от 0 до 10 штук

Сделать запросы в базу:

- выбрать ТОП 5 сорсов по количеству присоедененных кампаний
- выбрать кампании, которые не связаны ни с одним сорсом
- выбрать имена всех сущностей (сорсы + кампании)

### 2. Golang, основные типы данных

- Устройство байтслайса
- Каналы буферезированные и не буфферезированные
- Тред-сейф
- Мьютексы, атомики
- Структуры

ДЗ: сделать ХТТП-приложение, в параметрах запроса передается сорс, в ответе мы отдаем МАКСИМАЛЬНО БЫСТРО список всех кампаний, которые к нему прикручены. Напишите бенчмарк тест на хендлер.

### 3. Работа с параметрами запроса, подготовка к высокой нагрузке

Добавляем новое поля в БД (список) и пишем фильтр по доменам. Т.е. в параметрах добавяем параметр блок домен, если на кампании он указан, значит кампания в выдаче не участвует. Фильтр не регистрочувствительный (ААА и ааа - одно и то же, фильтр работает по уровням, если на кампании указано aaa.bbb.ccc, то фильтруем это и всё, что выше)

ДЗ: сделать логика вайт-листа. Т.е. кампания участвует в выдаче только для тех доменов, которые указаны в настройках. + сделать тесты

### 4. Профилирование

- Типы профилей
- На что нужно обращать внимание при разработке хайлоада
- Хип и стэк, кто когда, кто куда
- пулы

ДЗ: отпрофилировать своё приложение всем профилями, посмотреть что можно улучшить

### 5. Многопоточность

- Добавляем в кампанию метод “Сall()” в котором делаем слип на рандомное кол-во времени (от 30 до 200мс) и смотрим на наше время ответа хендлера. Обсуждаем как это можно улучшить

ДЗ: меняем метод Сall так, что он начинает возвращать значение “на сколько уснула горутина” и меняем наше ПО так, чтоб в ответе были не только кампании но и значение, которое вернул метод Кол. В ответе кампании должны быть отсортированы по возрастанию

### 6. ДНС. Балансировка и отказоустойчивость, сетевые соединения

Обсуждаем что такое ДНС, для чего нужен, что такое ДНС балансировка, что такое IPVS балансировка, VRRP, способ установки сетевых соединений

ДЗ: реализовать ДНС балансировку между двумя инстансами приложениями (доп локальный интерфейс + хостс файл)